Facility Activity_102_Reasoning_about_Design_by_Contract;
	uses Integer_Template;

(*
	-- This is a short intro to design by contract (specification)

	-- Basics
	-- Activity 1a: Understand the specification and code of Exchange; specification is the contract
	-- Activity 1a: Understand the use of Exchange in Main
	-- Activity 1b: Click on MP-Prove to reason about this code

	-- Guided:
	-- Activity 2: Write code for operations to satisfy the contracts of Op_1 and Op_2 and verify
	-- Activity 3: Write contracts for operations Op_1 and Op_2 to capture what their code does and verify

    -- Inquiry
	-- Activity 4+: Compare various contracts
	--              Understand the basics of design-by-contract responsibilities for implementers and benefits for callers
*)

	Operation Exchange (updates I: Integer; updates J: Integer);    -- specification: the parameters are modified purposefully as stated next
		ensures I = #J and J = #I;                                  -- specification: what this operation should do; #I and #J denote incoming values
	Procedure                                                       -- from here is code
		Var Temp: Integer;
		
		Temp := I;
		I := J;
		J := Temp;
	end Exchange;

	Operation Op_1 (updates I: Integer; updates J: Integer); 
		ensures I = #I and J = #I;                                
	Procedure                                                       
		-- write code below and verify your code
	end Op_1;

	Operation Op_2 (restores I: Integer; updates J: Integer);       -- restores mode specification is a shorthand for ensuring I = #I
		ensures J = #I;                                
	Procedure                                                      
		-- write code below and verify your code
	end Op_2;

	Operation Op_3 (updates I: Integer; updates J: Integer);       -- restores mode specification is a shorthand for ensuring I = #I
		-- the default is ensures true so this code wiill verify
		-- write a suitable ensures clause to capture what the code does
	Procedure                                                       
		I := J;
		J := I;
	end Op_3;

	Operation Op_4 (updates I: Integer; updates J: Integer);       -- restores mode specification is a shorthand for ensuring I = #I
		-- the default is ensures true so this code wiill verify
		-- write a suitable ensures clause to capture what the code does
	Procedure                                                      
		Var Temp: Integer;

		Temp := I;
		Temp := J;
		I := Temp;
		J := Temp;
	end Op_4;

	Operation Main();
	Procedure
		Var X, Y: Integer;
		
		Write_Line("Input two numbers");
		Read(X);
		Read(Y);
		
		Exchange(X, Y);             -- caller assumes that the operation works according to specification
		
		Write("The first number is:");
		Write(X);
		Write_Line("------------");
		Write("The second number is:");
		Write(Y);
		Write_Line("------------");
	end Main;

end Activity_102_Reasoning_about_Design_by_Contract;